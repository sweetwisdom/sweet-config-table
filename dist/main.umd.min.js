(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("vue")):"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["main"]=t(require("vue")):e["main"]=t(e["Vue"])})("undefined"!==typeof self?self:this,(function(e){return function(){"use strict";var t={203:function(t){t.exports=e}},a={};function n(e){var l=a[e];if(void 0!==l)return l.exports;var r=a[e]={exports:{}};return t[e](r,r.exports,n),r.exports}!function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p=""}();var l={};return function(){if(n.r(l),n.d(l,{default:function(){return T}}),"undefined"!==typeof window){var e=window.document.currentScript,t=e&&e.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);t&&(n.p=t[1])}var a,r,o={inheritAttrs:!1,name:"EcTable",props:{data:{type:Array},columns:{type:Array}},render(){const e=arguments[0],t=a=>{const n=["index","expand","selection"],l={};return a.headerRender&&(l.header=()=>a.headerRender()),a.headerSlot&&(l.header=()=>this.$scopedSlots[a.headerSlot]()),a.render?l.default=e=>a.render(e):-1===n.indexOf(a.type)&&(l.default=e=>e.row[a.prop]||"--"),a.slots&&(l.default=e=>this.$scopedSlots[a.slots](e)),e("el-table-column",{attrs:{align:"center",...a},scopedSlots:l},[a.children&&a.children.map((e=>t(e)))])},a=this.columns.map(t);return e("div",[this.$slots.ooz,e("el-table",{attrs:{data:this.data,"tooltip-effect":"dark",stripe:!0,border:!0,...this.$attrs},ref:"table",on:{...this.$listeners}},[a])])}},s=o;function i(e,t,a,n,l,r,o,s){var i,c="function"===typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=a,c._compiled=!0),n&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),o?(i=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),l&&l.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=i):l&&(i=s?function(){l.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:l),i)if(c.functional){c._injectStyles=i;var d=c.render;c.render=function(e,t){return i.call(t),d(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,i):[i]}return{exports:e,options:c}}var c=i(s,a,r,!1,null,null,null),d=c.exports,u=d,h=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div")},p=[],m=n(203),f=(0,m.defineComponent)({__name:"show",setup(e){const t=(0,m.reactive)({count:0});return{__sfc:!0,state:t}}}),y=f,b=i(y,h,p,!1,null,"11a3b0a0",null),g=b.exports;g.name="ZShow";var v=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-box"},[e.search?t("el-form",{ref:"searchForm",staticClass:"search",attrs:{model:e.searchModel,inline:!0,"label-position":"left","label-width":e.search.labelWidth}},[e._l(e.search.fields,(function(a){return t("el-form-item",{key:a.name,attrs:{label:a.label,prop:a.name}},["custom"===a.type?e._t(a.slot):"select"===a.type?t("el-select",{style:{width:e.search.inputWidth,...a.style},attrs:{filterable:!!a.filterable,multiple:!!a.multiple,clearable:"",placeholder:`请选择${a.label}`},model:{value:e.searchModel[a.name],callback:function(t){e.$set(e.searchModel,a.name,t)},expression:"searchModel[item.name]"}},e._l(a.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1):"radio"===a.type?t("el-radio-group",{style:{width:e.search.inputWidth,...a.style},model:{value:e.searchModel[a.name],callback:function(t){e.$set(e.searchModel,a.name,t)},expression:"searchModel[item.name]"}},e._l(a.options,(function(a){return t("el-radio",{key:a.value,attrs:{label:a.value}},[e._v(e._s(a.name))])})),1):"radio-button"===a.type?t("el-radio-group",{style:{width:e.search.inputWidth,...a.style},model:{value:e.searchModel[a.name],callback:function(t){e.$set(e.searchModel,a.name,t)},expression:"searchModel[item.name]"}},e._l(a.options,(function(a){return t("el-radio-button",{key:a.value,attrs:{label:a.value}},[e._v(e._s(a.name))])})),1):"checkbox"===a.type?t("el-checkbox-group",{style:{width:e.search.inputWidth,...a.style},model:{value:e.searchModel[a.name],callback:function(t){e.$set(e.searchModel,a.name,t)},expression:"searchModel[item.name]"}},e._l(a.options,(function(a){return t("el-checkbox",{key:a.value,attrs:{label:a.value}},[e._v(e._s(a.name))])})),1):"checkbox-button"===a.type?t("el-checkbox-group",{style:{width:e.search.inputWidth,...a.style},model:{value:e.searchModel[a.name],callback:function(t){e.$set(e.searchModel,a.name,t)},expression:"searchModel[item.name]"}},e._l(a.options,(function(a){return t("el-checkbox-button",{key:a.value,attrs:{label:a.value}},[e._v(e._s(a.name))])})),1):"date"===a.type?t("el-date-picker",{style:{width:e.search.inputWidth,...a.style},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:`请选择${a.label}`},model:{value:e.searchModel[a.name],callback:function(t){e.$set(e.searchModel,a.name,t)},expression:"searchModel[item.name]"}}):"datetime"===a.type?t("el-date-picker",{style:{width:e.search.inputWidth,...a.style},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",clearable:"",placeholder:`请选择${a.label}`},model:{value:e.searchModel[a.name],callback:function(t){e.$set(e.searchModel,a.name,t)},expression:"searchModel[item.name]"}}):"daterange"===a.type?t("el-date-picker",{style:{width:e.search.inputWidth,...a.style},attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:""},on:{change:function(t){return e.handleDateChange(t,a)}},model:{value:e.searchModel[a.name],callback:function(t){e.$set(e.searchModel,a.name,t)},expression:"searchModel[item.name]"}}):"datetimerange"===a.type?t("el-date-picker",{style:{width:e.search.inputWidth,...a.style},attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"-","start-placeholder":"开始时间","end-placeholder":"结束时间",clearable:""},on:{change:function(t){return e.handleDateChange(t,a)}},model:{value:e.searchModel[a.name],callback:function(t){e.$set(e.searchModel,a.name,t)},expression:"searchModel[item.name]"}}):"number"===a.type?t("el-input-number",{style:{width:e.search.inputWidth,...a.style},attrs:{placeholder:`请输入${a.label}`,"controls-position":"right",min:a.min,max:a.max},model:{value:e.searchModel[a.name],callback:function(t){e.$set(e.searchModel,a.name,t)},expression:"searchModel[item.name]"}}):"textarea"===a.type?t("el-input",{style:{width:e.search.inputWidth,...a.style},attrs:{type:"textarea",clearable:"",placeholder:`请输入${a.label}`},model:{value:e.searchModel[a.name],callback:function(t){e.$set(e.searchModel,a.name,t)},expression:"searchModel[item.name]"}}):t("el-input",{style:{width:e.search.inputWidth,...a.style},attrs:{placeholder:`请输入${a.label}`,clearable:""},model:{value:e.searchModel[a.name],callback:function(t){e.$set(e.searchModel,a.name,t)},expression:"searchModel[item.name]"}})],2)})),t("el-form-item",{staticClass:"search-btn"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("查询")]),t("el-button",{attrs:{icon:"el-icon-refresh-right"},on:{click:e.handleReset}},[e._v("重置")])],1)],2):e._e(),e.hideTitleBar?e._e():t("div",{staticClass:"head"},[e._t("title",(function(){return[t("span",{staticClass:"title"},[e._v(e._s(e.title))])]})),t("div",{staticClass:"toolbar"},[e._t("toolbar")],2)],2),t("div",{staticClass:"table"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.tableData,"row-key":e.rowKey,"tree-props":e.tree.treeProps,lazy:e.tree.lazy,load:e.tree.load,"tooltip-effect":"dark",height:"100%",stripe:"",border:e.border},on:{"selection-change":e.handleSelectionChange}},e._l(e.columns,(function(a){return t("el-table-column",e._b({key:a.label,attrs:{"filter-method":a.filters&&e.filterHandler,"show-overflow-tooltip":!a.wrap},scopedSlots:e._u([a.labelSlot?{key:"header",fn:function(t){return[e._t(a.labelSlot,null,null,t)]}}:null,a.tdSlot?{key:"default",fn:function(t){return[e._t(a.tdSlot,null,null,t)]}}:null],null,!0)},"el-table-column",a,!1))})),1)],1),e.paginationConfig.show&&e.total>0?t("el-pagination",{staticClass:"pagination",style:e.paginationConfig.style,attrs:{"current-page":e.pageNum,"page-sizes":e.paginationConfig.pageSizes,"page-size":e.pageSize,layout:e.paginationConfig.layout,total:e.total},on:{"size-change":e.handleSizeChange,"update:currentPage":function(t){e.pageNum=t},"update:current-page":function(t){e.pageNum=t},"current-change":e.handleCurrentChange,"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t}}}):e._e()],1)},_=[];const M=e=>{const t={};return e&&e.fields&&e.fields.forEach((e=>{switch(e.type){case"checkbox":case"checkbox-button":t[e.name]=[];break;default:break}void 0!==e.defaultValue&&(t[e.name]=e.defaultValue,("daterange"===e.type||"datetimerange"===e.type)&&e.trueNames&&Array.isArray(e.defaultValue)&&e.defaultValue.forEach(((a,n)=>{t[e.trueNames[n]]=a})))})),t};var x={name:"ProTable",props:{request:{type:Function},title:{type:String,default:""},hideTitleBar:{type:Boolean,default:!1},search:{type:[Boolean,Object],default:!1},border:{type:Boolean,default:!1},columns:{type:Array,default:function(e){return[]}},rowKey:{type:String,default:"id"},pagination:{type:[Boolean,Object],default:()=>({})},tree:{type:Object,default:()=>({})}},components:{},data(){let e={show:!1};if("object"===typeof this.pagination){const{layout:t,pageSizes:a,style:n}=this.pagination;e={show:!0,layout:t||"total, sizes, prev, pager, next, jumper",pageSizes:a||[10,20,30,40,50,100],style:n||{}}}return{searchModel:M(this.search),loading:!1,tableData:[],total:0,pageNum:1,pageSize:!!this.pagination&&this.pagination.pageSize||10,paginationConfig:e}},created(){this.getTableData()},methods:{async getTableData(){this.loading=!0;const e=this.optimizeFields(this.search),{data:t,total:a}=await this.request({pageNum:this.pageNum,pageSize:this.pageSize,...e});this.loading=!1,this.tableData=t,this.total=a},handleSearch(){this.pageNum=1,this.getTableData()},handleReset(){"{}"!==JSON.stringify(this.searchModel)&&(this.pageNum=1,this.searchModel=M(this.search),this.getTableData())},refresh(){this.getTableData()},optimizeFields(e){const t=JSON.parse(JSON.stringify(this.searchModel));return e&&e.fields&&e.fields.forEach((e=>{t.hasOwnProperty(e.name)&&(e.transform&&(t[e.name]=e.transform(t[e.name])),"daterange"!==e.type&&"datetimerange"!==e.type||!e.trueNames||delete t[e.name])})),t},handleCurrentChange(e){this.getTableData()},handleSizeChange(e){this.pageNum=1,this.getTableData()},handleSelectionChange(e){this.$emit("selectionChange",e)},filterHandler(e,t,a){const n=a["property"];return t[n]===e},handleDateChange(e,t){t.trueNames&&(e?e.forEach(((e,a)=>{this.searchModel[t.trueNames[a]]=e})):t.trueNames.forEach((e=>{delete this.searchModel[e]})))}}},S=x,w=i(S,v,_,!1,null,"a750e3aa",null),k=w.exports,C=k;const $=[C,u],z=function(e){z.installed||(z.installed=!0,$.map((t=>e.component(t.name,t))))};var N={install:z};"undefined"!==typeof window&&window.Vue&&window.Vue.use(z);var T=N}(),l}()}));